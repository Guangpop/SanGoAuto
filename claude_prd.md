# PRD - 三國天命放置小遊戲

## 1. 專案簡介
- **名稱**：三國天命放置小遊戲
- **平台**：GitHub Pages (github.io)
- **題材**：三國歷史 + 放置養成
- **玩法特色**：
  - 自動化放置遊戲，玩家僅需在開局時做出選擇，之後遊戲自動推進。
  - 開局隨機技能 + 星星資源分配，影響後續角色能力。
  - 遊戲事件由資料庫隨機驅動，結合「天命」數值產生不同結局。
  - 核心循環：隨機事件 → 攻城戰 → 招降將領 → 升級 → 重複循環。

---

## 2. 遊戲流程

### 2.1 開局
1. 玩家獲得 **10 顆星星**。
2. 系統從 **天命技能資料庫** (100+ 技能) 中隨機抽取 3 個技能。
   - 玩家可選擇 **1 個技能** 或 **不選**。
   - 技能需要消耗 1~3 星星。
3. 重複三輪技能抽選。
4. 剩餘的星星轉換為 **能力值點數**：
   - 1 星星 = 10 能力值
   - 隨機分配到 **武力、智力、統治、政治、魅力** (玩家可手動分配是進階選項)。

### 2.2 能力值 (0~100)
- **武力**：攻擊傷害基礎值。
- **智力**：技能成功率與技能傷害。
- **統治**：帶兵數量與承受傷害上限。
- **政治**：城池產資源量、守城成功率。
- **魅力**：俘虜將領的投降率 & 將領自動投奔的機率。
- **天命 (隱藏)**：隨機事件發生機率加乘、隱藏 buff。

### 2.3 升級系統
- 玩家等級：Lv.1 ~ Lv.10。
- 戰鬥勝利 → 玩家等級 +1。
- 升級時隨機增加能力值 (0~10)。

### 2.4 遊戲主循環
1. **隨機事件階段**
   - 從事件資料庫抽取 1~2 個事件。
   - 機率受 **天命** 影響。
2. **戰鬥階段**
   - 攻打相鄰城池 (隨機選擇)。
   - 結果依據 **能力值 + 技能 + 裝備**。
   - 勝利 → 獲得俘虜 → 根據 **魅力** 決定是否收編。
3. **收編/資源管理**
   - 新將領分配兵數。
   - 根據城池數量產生金錢 & 裝備。
4. **升級**
   - 戰鬥勝利 → 升級，增加能力值。
5. **重複流程，直到遊戲結束**。

### 2.5 結束條件
- 玩家將領死亡 → Game Over。
- 玩家統一所有城池 → Victory。

---

## 3. 遊戲核心規則

### 3.1 資源產出機制
- **城池為資源基礎**：城池是金錢與兵力的主要來源
- **數量影響產出**：控制的城池越多，資源產出越高
- **線性成長模式**：每座城池提供固定的基礎產出值

### 3.2 金錢系統規則
- **產出來源**：每座城池每回合產生固定金錢（受政治能力影響）
- **主要用途**：購買裝備、強化武器防具
- **解鎖機制**：
  - 1-2 城池：僅能購買普通裝備
  - 3-4 城池：解鎖稀有裝備購買權限
  - 5+ 城池：解鎖最高級稀有裝備
  - 傳說裝備：僅能通過特殊事件獲得，無法購買

### 3.3 兵力分配規則
- **產出來源**：每座城池每回合提供固定兵力補充
- **分配機制**：
  - 玩家主將：優先分配，影響承受攻擊總量
  - 同伴將領：依據統治能力決定可分配上限
  - 城池守備：剩餘兵力用於城池防禦
- **戰鬥消耗**：每次戰鬥根據勝負結果消耗一定比例兵力

### 3.4 城池管理規則
- **攻城條件**：只能攻打與現有城池相鄰的目標城池
- **防禦機制**：城池具有基礎防禦值，駐守將領提供額外防禦
- **維護成本**：城池越多，每回合維護金錢消耗越高（平衡機制）

---

## 4. 遊戲資源

### 4.1 技能資料庫
- 數量：100+
- 範例：
  - **火攻** (2星)：對敵方造成額外傷害。
  - **天選之人** (3星)：全能力 +2，天命 +10。
  - **堅守不出** (1星)：防守戰時傷害減半。

### 4.2 城池
- 參考三國知名城池 (洛陽、許昌、建業、成都、長安、壽春等)。
- 每座城池：
  - 所屬勢力
  - 駐守將領 (1~3 名)
  - 連線路徑 (graph 結構)

### 4.3 將領
- **來源**：三國史實人物庫 (曹操、劉備、孫權、關羽、張飛、諸葛亮等)。
- **屬性**：能力值 (武/智/統/政/魅)，等級。
- **狀態**：敵對 / 中立 / 玩家陣營。

### 4.4 裝備
- 武器有分等級:傳說，稀有，普通，傳說武器只有事件能取得
- 稀有，普通武器根據擁有的城池數量會從低階慢慢增加高階 (例如5座城池後開始出現稀有)
- 範例：
  - 青龍偃月刀：武力 +20 傳說
  - 青罡劍：武力 +5，智力 +10 稀有
  - 赤兔馬：行軍速度 +10% (攻城時機率先手) 傳說
  - 木劍：武力 +1 普通

---

## 5. 隨機事件系統
- 事件具有 **觸發機率** 與 **天命修正值**。
- 範例：
  - **天降神兵**：獲得傳說武器，機率 3%。
  - **遭受攻擊**：隨機城池失守，受政治影響。
  - **黃巾起義**：隨機新敵軍出現，增加挑戰性。
  - **賢才投奔**：隨機史實將領加入，受魅力影響。

---

## 6. 系統架構 (前端為主)
- **技術棧**：HTML + CSS + JavaScript (可考慮 React/Vue 簡化 UI)。
- **資料儲存**：
  - 技能、將領、城池、事件 → JSON 檔案。
- **遊戲邏輯**：
  - 放置循環用 JS Timer 控制 (e.g., setInterval)。
- **存檔系統**：
  - localStorage 保存玩家進度。

---

## 7. 使用者介面 (UI/UX)
- **首頁**：標題、開始遊戲、查看規則。
- **開局選擇畫面**：顯示技能抽卡與星星數。
- **遊戲主畫面**：
  - 上方：玩家主將資訊 (能力值、等級、裝備)。
  - 中央：事件訊息框 (自動滾動顯示發生事件)。
  - 下方：地圖縮略圖 (城池、佔領狀態)。
- **結束畫面**：統一或失敗，顯示戰績統計。

---

## 8. 未來擴充
- 劇本模式 (赤壁之戰、官渡之戰)。
- 難度選擇 (簡單/普通/困難)。
- 自動戰報回放。
- 成就系統。

---

  建議補充的部分

  1. 遊戲平衡性細節

  - 戰鬥計算公式：建議明確各能力值在戰鬥中的權重比例
  - 天命數值具體影響：天命如何影響事件機率的計算公式
  - 裝備獲得機制：除了城池數量，是否有其他獲得途徑

  2. 用戶體驗優化

  - 遊戲節奏控制：建議增加遊戲速度調整功能（1x, 2x, 4x）
  - 存檔機制詳細說明：多存檔槽位、雲端同步考量
  - 音效/背景音樂：增強沉浸感的音效設計

  3. 技術實作細節

  - 離線收益：玩家關閉遊戲後重新開啟時的收益計算
  - 性能優化：長時間運行的內存管理策略
  - 錯誤處理：存檔損壞、網路問題等異常情況處理

  4. 內容豐富度

  - 事件系統擴充：建議增加更多互動性事件類型
  - 成就系統：雖然在未來擴充中提及，但建議優先實作基礎版本

---
